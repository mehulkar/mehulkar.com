---
layout: layout.njk
---

<h1>üëãüèæ</h1>

<p>
  I'm a software engineer primarily working on the web. I used to <a href="https://linkedin.com/in/mehulkar" target="_blank" rel="noopener">work
  at Apple</a>, but I've just accepted an offer to work on <a href="https://turborepo.org">Turborepo</a> at <a href="https://vercel.com">Vercel</a>,
  starting on August 1st! Here's a printable <a href="/resume">resume</a>.
</p>

<h2 class="mb3">Recently</h2>
<ul class="small">

  <li>
    {# TODO: Make this dynamic #}
    Read <a target="_blank" rel="noopener noreferrer" href="https://www.goodreads.com/review/show/4794773798"><em>Vanderbilt: The Rise and Fall of an American Dynasty</em>.</a>
  <li>
    Watched <span id="movie">...</span> <span id="movie-date">...</span> and rated it <span id="rating">0/5</span>.
  </li>
  <li>
    <p id="tweet-preamble">Liked a tweet:</p>
    <figure id="tweet">
      <blockquote cite=""></blockquote>
      <figcaption>
        <cite></cite>
      </figcaption>
    </figure>
  </li>
</ul>

<h2 class="mb3">Posts</h2>

{% set posts = collections.byYear | category("programming") %}
{% from 'partials/_by-year.njk' import render %}
{{ render(posts) }}

<script>
  // movie
  fetch('/api/watching').then((res) => res.json()).then((data) => {
    console.log('movie', data);
    const { name, rating, watchedOn, url } = data;
    const daysAgo = Math.round((new Date() - new Date(watchedOn)) / 1000 / 60 / 60 / 24);
    const date = new Intl.RelativeTimeFormat('en', { numeric: 'auto' }).format(daysAgo * -1, 'days')

    document.getElementById('movie').innerHTML = `<a href="${url}">${name}</a>`;
    document.getElementById('movie-date').innerText = date;
    document.getElementById('rating').innerText = `${rating}/5 stars`;
  });

  // tweet
  fetch('/api/fave-tweet').then(res => res.json()).then(data => {
    console.log('tweet', data);
    const { tweet, author } = data;
    const url = `https://twitter.com/${author.username}/status/${tweet.id}`;
    const authorUrl = `https://twitter.com/${author.username}`;

    const tweetElement = document.getElementById('tweet');

    tweetElement.querySelector('blockquote').setAttribute('cite', url);
    tweetElement.querySelector('blockquote').innerHTML = tweet.html;
    tweetElement.querySelector('cite').innerHTML = `<a target="_blank" rel="noopener noreferrer" href="${url}">‚Äî @${author.username}</a>`;
  });
</script>
