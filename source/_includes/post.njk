---
layout: layout.njk
---

<div class='post bb b--black-10 mb2'>
  <article class='mb3 mw7 center'>
    <header class='bb b--black-10 mv3'>
      <h3 class='f5 fw2 mb1'>{{page.date | fullDate }}</h2>
      <h1 class='fw3 mb1 mt0 post--title'>{{title}}</h1>
      <section class="mb3">
        {% for tag in (tags | splitTags)  %}
          {{tag | tagLink | safe }}
        {% endfor %}
      </section>

      <section id="wm-likes" class="wm-likes wm-hidden flex">
        <ul class="mb0"></ul>
        <p id="wm-like-count" class="ml2 mb0"></p>
      </section>


    </header>

    {{content | safe }}
  </article>

  <p class='f6 bg-light-yellow pa3 black-80 br2 ba b--yellow mw7 center'>
    If you like this post, please <a class='black-80 underline' href="{{page | buildTweetURL(tags)}}" target='_blank'>share it on Twitter</a>.
    You can also email me <a class='black-80 underline' href='mailto:mehul.kar@gmail.com?subject=I have an opinion!'>email me</a>
    or subscribe to my <a href="/feed.xml">RSS feed</a>.
  </p>
</div>

{# TODO: looks bad when there are no replies, likes get centered #}
<aside id="webmentions" class="webmentions mb3">
  <section id="wm-replies" class="wm-replies wm-hidden mw7 center">
    <h2>Replies <span id="wm-reply-count"></span></h2>
    <ul></ul>
  </section>

  <template id="wm-like">
    <li>
      <a href="" id="wm-reply-author-url">
        <img alt="" id="wm-reply-author-photo" class="wm-reply-author-photo" width="25" height="auto" src="">
      </a>
    </li>
  </template>

  <template id="wm-reply">
    <li>
      <div class="flex items-end mb2 bb pb2 b--black-10">
        <img alt="" id="wm-reply-author-photo" class="wm-reply-author-photo mr1" width="40" height="auto" src="">
        <span id="wm-reply-author" class="wm-reply-author"></span>
        <span id="wm-reply-date"></span>
      </div>
      <div id="wm-reply-text"></div>
      <span id="wm-reply-link" class="wm-reply-link"></span>
    </li>
  </template>
</aside>

<script src={{"/javascript/webmentions.js" | url }}></script>
<script>
  window.fetchWebMentions("{{page.url}}");
</script>
